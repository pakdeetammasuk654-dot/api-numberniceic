<link rel="stylesheet" href="/static/css/analysis.css">
<link rel="stylesheet" href="/static/css/dashboard.css">

<div class="card">
    <div class="admin-header">
        <h2 class="header-line"><i class="fa-solid fa-table-columns fa-fw"></i> ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°</h2>
        <a href="/analysis" class="btn btn-primary btn-sm-custom"><i class="fa-solid fa-plus fa-fw"></i> ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà</a>
    </div>

    <div class="dashboard-stats-grid">
        <div class="stat-card stat-card-saved">
            <h3 class="stat-title"><i class="fa-solid fa-list-check"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß</h3>
            <p class="stat-value">{{.TotalCount}}</p>
            <small class="stat-label">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠</small>
        </div>
        <div class="stat-card stat-card-score">
            <h3 class="stat-title"><i class="fa-solid fa-star"></i> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ö‡∏≤‡∏£‡∏°‡∏µ‡∏£‡∏ß‡∏°</h3>
            <p class="stat-value">{{.TotalScoreSum}}</p>
            <small class="stat-label">‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏° (‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏ä‡∏∑‡πà‡∏≠)</small>
        </div>
    </div>

    <h3 class="header-line">üìÇ ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</h3>

    {{if .SavedNames}}
        <div class="table-responsive">
            <table class="table table-hover align-middle dashboard-table">
                <thead>
                <tr>
                    <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                    <th class="text-center">‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</th>
                    <th class="text-center">‡πÄ‡∏•‡∏Ç‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</th>
                    <th class="text-center">‡∏û‡∏•‡∏±‡∏á‡πÄ‡∏á‡∏≤</th>
                    <th class="text-center">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</th>
                    <th class="text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                </tr>
                </thead>
                <tbody>
                {{range .SavedNames}}
                    <tr class="clickable-row" data-href="/analysis?name={{.Name}}&birth_day={{.BirthDay}}">
                        <td>
                            <div class="name-cell">{{.NameHTML}}</div>
                        </td>
                        <td class="text-center">
                            <span class="birthday-badge">{{.BirthDayTH}}</span>
                        </td>
                        <td class="text-center">
                            <div class="pair-group">
                                {{range .SatPairs}}
                                    <div class="mini-star-table {{if .Meaning}}type-{{.Meaning.PairType}}{{else}}star-sat{{end}}">{{.Pair}}</div>
                                {{end}}
                            </div>
                            <div class="sum-label">(‡∏£‡∏ß‡∏°: {{.SatSum}})</div>
                        </td>
                        <td class="text-center">
                            <div class="pair-group">
                                {{range .ShaPairs}}
                                    <div class="mini-star-table {{if .Meaning}}type-{{.Meaning.PairType}}{{else}}star-sha{{end}}">{{.Pair}}</div>
                                {{end}}
                            </div>
                            <div class="sum-label">(‡∏£‡∏ß‡∏°: {{.ShaSum}})</div>
                        </td>
                        <td class="text-center">
                            <div class="total-score-badge {{if lt .TotalScore 0}}score-bad{{else}}score-good{{end}}">
                                {{.TotalScore}}
                            </div>
                        </td>
                        <td class="text-center">
                            <a href="/api/delete-name/{{.ID}}" class="btn-delete" title="‡∏•‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏µ‡πâ">
                                <i class="fa-solid fa-trash-can"></i>
                            </a>
                        </td>
                    </tr>
                {{end}}
                </tbody>
            </table>
        </div>
    {{else}}
        <div class="empty-state">
            <div class="empty-state-icon"><i class="fa-solid fa-folder-open"></i></div>
            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</p>
            <a href="/analysis" class="empty-state-link">üëâ ‡πÑ‡∏õ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏¢!</a>
        </div>
    {{end}}
</div>

<script src="/static/js/dashboard.js"></script>
