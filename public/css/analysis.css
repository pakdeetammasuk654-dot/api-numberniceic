/* public/css/analysis.css */

/* --- Form Styles --- */
.analysis-form {
    /* Styles for the form itself */
}
.input-wrapper {
    position: relative;
}
.input-icon {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    color: #aaa;
    font-size: 1.2rem;
}
.form-control-custom {
    width: 100%;
    padding: 15px 15px 15px 55px; /* Padding for icon */
    font-size: 1.2rem;
    border: 1px solid #ddd;
    border-radius: 30px;
    box-sizing: border-box;
    transition: border-color 0.2s, box-shadow 0.2s;
}
.form-control-custom:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
}
.select-wrapper .form-control-custom {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23aaa' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1.5rem center;
}

/* --- Summary Box & Results --- */
.summary-box {
    background: white;
    border-radius: 12px;
    padding: 10px 25px 25px 25px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    margin-bottom: 30px;
    text-align: center;
    border: 1px solid #eee;
    position: relative;
}
.summary-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    margin: 0 0 30px 0;
    flex-wrap: nowrap;
}
.result-container { display: flex; gap: 20px; flex-wrap: wrap; margin-top: 20px; }
.result-col { flex: 1; min-width: 300px; }
.header-line { border-bottom: 2px solid #eee; padding-bottom: 10px; }
.badge { display: inline-block; padding: 5px 10px; border-radius: 50%; background: #007bff; color: white; font-weight: bold; min-width: 20px; text-align: center; }

/* --- Score Panel --- */
.score-panel {
    background: linear-gradient(145deg, #ffffff, #f5f5f5);
    border-radius: 15px; padding: 20px; width: 160px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05); border: 1px solid #eee;
    display: flex; flex-direction: column; gap: 15px; text-align: center;
    flex-shrink: 0;
}
.score-item { display: flex; flex-direction: column; align-items: center; }
.score-label { font-size: 0.9rem; color: #666; margin-bottom: 5px; }
.score-value-big {
    font-size: 2.5rem; font-weight: 800; line-height: 1;
    border-radius: 50%; width: 120px; height: 120px;
    display: flex; justify-content: center; align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1); padding: 5px; box-sizing: border-box;
    color: #333; background: #f0f0f0;
}
.bg-good { background: linear-gradient(135deg, #43a047, #2e7d32); color: white; box-shadow: 0 4px 15px rgba(46, 125, 50, 0.4); border: 3px solid #a5d6a7; }
.bg-bad { background: linear-gradient(135deg, #e53935, #c62828); color: white; box-shadow: 0 4px 15px rgba(198, 40, 40, 0.4); border: 3px solid #ffcdd2; }
.score-value-small { font-size: 1.4rem; font-weight: bold; border: none; background-color: transparent; border-radius: 50%; display: inline-flex; justify-content: center; align-items: center; min-width: 50px; min-height: 50px; }
.val-good { color: #2e7d32; }
.val-bad  { color: #c62828; }
.divider { height: 1px; background: #e0e0e0; width: 100%; margin: 5px 0; }

/* --- Right Column --- */
.right-column { display: flex; flex-direction: column; gap: 15px; align-items: center; min-width: 160px; justify-content: center; flex-shrink: 0; }
.kakis-box { width: 100%; text-align: center; position: relative; z-index: 20; margin-top: 0; white-space: nowrap; }
.speech-bubble-success {
    position: relative; background: #e8f5e9; border: 1px solid #a5d6a7; border-radius: 15px; padding: 10px 20px;
    color: #2e7d32; font-weight: bold; font-size: 1rem; display: inline-block; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.speech-bubble-success::after, .speech-bubble-success::before { top: 100%; left: 50%; border: solid transparent; content: " "; height: 0; width: 0; position: absolute; pointer-events: none; }
.speech-bubble-success::after { border-color: rgba(232, 245, 233, 0); border-top-color: #e8f5e9; border-width: 8px; margin-left: -8px; }
.speech-bubble-success::before { border-color: rgba(165, 214, 167, 0); border-top-color: #a5d6a7; border-width: 9px; margin-left: -9px; }

/* --- Right Action Buttons --- */
.action-frame { background-color: #fff; padding: 20px; border-radius: 15px; width: 160px; text-align: center; display: flex; flex-direction: column; gap: 15px; border: 1px solid #eee; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
.action-title { font-weight:bold; color:#555; }
.btn-action { display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 12px; border-radius: 10px; color: white; font-weight: bold; text-decoration: none; transition: all 0.2s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.1); box-sizing: border-box; }
.btn-action:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
.btn-sat { background: linear-gradient(135deg, #42a5f5, #1e88e5); }
.btn-lang { background: linear-gradient(135deg, #ab47bc, #8e24aa); }
.action-desc { font-size: 0.8rem; color: #888; }

/* --- Solar System (Galaxy) --- */
.galaxy-wrapper { display: flex; flex-direction: column; align-items: center; }
.solar-system { position: relative; width: 340px; height: 340px; display: flex; justify-content: center; align-items: center; }
.solar-system .score-circle { width: 120px; height: 120px; border-radius: 50%; display: flex; justify-content: center; align-items: center; text-align: center; padding: 5px; font-size: 1.3rem; font-weight: 800; word-wrap: break-word; line-height: 1.2; z-index: 10; transition: all 0.5s ease; }
.sun-good { background: radial-gradient(circle at 30% 30%, #fff176, #fbc02d); border: 4px solid #fff9c4; color: #3e2723; text-shadow: 0 1px 0px rgba(255,255,255,0.5); box-shadow: 0 0 40px rgba(255, 193, 7, 0.6); animation: sun-pulse 3s infinite alternate; }
.sun-bad { border: 4px solid #616161; color: #bdbdbd; background: radial-gradient(circle at 30% 30%, #757575, #424242); box-shadow: inset 0 0 20px rgba(0,0,0,0.5); text-shadow: 0 -1px 0 rgba(0,0,0,0.5); }
@keyframes sun-pulse { from { box-shadow: 0 0 20px rgba(255, 193, 7, 0.4); transform: scale(1); } to { box-shadow: 0 0 50px rgba(255, 193, 7, 0.8); transform: scale(1.02); } }

/* --- Orbits & Planets --- */
.orbit-ring { position: absolute; border-radius: 50%; border: 1px dashed rgba(0, 0, 0, 0.08); top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; }
.ring-middle { width: 220px; height: 220px; border-color: rgba(33, 150, 243, 0.15); animation: orbit-spin 40s linear infinite; z-index: 2; }
.ring-outer { width: 310px; height: 310px; border-color: rgba(111, 66, 193, 0.15); animation: orbit-spin 60s linear infinite; z-index: 1; }
@keyframes orbit-spin { from { transform: translate(-50%, -50%) rotate(-90deg); } to { transform: translate(-50%, -50%) rotate(270deg); } }
.planet-wrapper { position: absolute; width: 40px; height: 40px; top: 50%; left: 50%; margin-top: -20px; margin-left: -20px; }
.mini-star, .mini-star-table { width: 100%; height: 100%; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 0.9rem; font-weight: bold; color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
.mini-star.type-D10, .mini-star.type-d10, .mini-star-table.type-D10, .mini-star-table.type-d10 { background: linear-gradient(135deg, #1b5e20, #2e7d32); box-shadow: 0 0 10px rgba(27, 94, 32, 0.6); }
.mini-star.type-D8, .mini-star.type-d8, .mini-star-table.type-D8, .mini-star-table.type-d8 { background: linear-gradient(135deg, #2e7d32, #43a047); box-shadow: 0 0 8px rgba(46, 125, 50, 0.5); }
.mini-star.type-D5, .mini-star.type-d5, .mini-star-table.type-D5, .mini-star-table.type-d5 { background: linear-gradient(135deg, #43a047, #66bb6a); box-shadow: 0 0 5px rgba(67, 160, 71, 0.4); }
.mini-star[class*="type-D"], .mini-star-table[class*="type-D"] { background: linear-gradient(135deg, #4caf50, #81c784); }
.mini-star.type-R10, .mini-star.type-r10, .mini-star-table.type-R10, .mini-star-table.type-r10 { background: linear-gradient(135deg, #b71c1c, #c62828); box-shadow: 0 0 10px rgba(183, 28, 28, 0.6); }
.mini-star.type-R7, .mini-star.type-r7, .mini-star-table.type-R7, .mini-star-table.type-r7 { background: linear-gradient(135deg, #c62828, #d32f2f); box-shadow: 0 0 8px rgba(198, 40, 40, 0.5); }
.mini-star.type-R5, .mini-star.type-r5, .mini-star-table.type-R5, .mini-star-table.type-r5 { background: linear-gradient(135deg, #d32f2f, #ef5350); box-shadow: 0 0 5px rgba(211, 47, 47, 0.4); }
.mini-star[class*="type-R"], .mini-star-table[class*="type-R"] { background: linear-gradient(135deg, #ef5350, #e57373); }
.star-sha, .mini-star-table.star-sha { background: linear-gradient(135deg, #ab47bc, #7b1fa2); }
.star-sat, .mini-star-table.star-sat { background: linear-gradient(135deg, #42a5f5, #1976d2); }
.c-spin-middle { animation: counter-spin 40s linear infinite; }
.c-spin-outer { animation: counter-spin 60s linear infinite; }
@keyframes counter-spin { from { transform: rotate(90deg); } to { transform: rotate(-270deg); } }
.pos-mid-0 { transform: rotate(0deg) translate(110px) rotate(0deg); }
.pos-mid-1 { transform: rotate(72deg) translate(110px) rotate(-72deg); }
.pos-mid-2 { transform: rotate(144deg) translate(110px) rotate(-144deg); }
.pos-mid-3 { transform: rotate(216deg) translate(110px) rotate(-216deg); }
.pos-mid-4 { transform: rotate(288deg) translate(110px) rotate(-288deg); }
.pos-out-0 { transform: rotate(30deg) translate(155px) rotate(-30deg); }
.pos-out-1 { transform: rotate(90deg) translate(155px) rotate(-90deg); }
.pos-out-2 { transform: rotate(150deg) translate(155px) rotate(-150deg); }
.pos-out-3 { transform: rotate(210deg) translate(155px) rotate(-210deg); }
.pos-out-4 { transform: rotate(270deg) translate(155px) rotate(-270deg); }
.pos-out-5 { transform: rotate(330deg) translate(155px) rotate(-330deg); }

/* --- Pair Cards --- */
.pair-card { background: white; border-left: 6px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s; }
.pair-card:hover { transform: translateX(5px); }
.pair-number { font-size: 1.5rem; font-weight: bold; color: #333; margin-right: 10px; }
.type-R10 { border-left-color: #b71c1c !important; background-color: #ffebee; }
.type-R7 { border-left-color: #d32f2f !important; background-color: #ffcdd2; }
.type-R5 { border-left-color: #ef5350 !important; background-color: #ffebee; }
.type-D10 { border-left-color: #1b5e20 !important; background-color: #e8f5e9; }
.type-D8 { border-left-color: #43a047 !important; background-color: #f1f8e9; }
.type-D5 { border-left-color: #81c784 !important; background-color: #f9fbe7; }

/* --- Sample Avatars Section --- */
.sample-section { margin-top: 30px; padding-top: 20px; border-top: 1px dashed #eee; }
.sample-title { font-size: 1rem; color: #666; margin-bottom: 15px; text-align: left; font-weight: bold; }
.sample-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; }
.sample-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: all 0.2s ease; }
.sample-item:hover { transform: translateY(-5px); }
.sample-item img { width: 100%; max-width: 50px; aspect-ratio: 1/1; border-radius: 50%; background-color: #f0f0f0; margin-bottom: 5px; border: 2px solid transparent; transition: border-color 0.2s; }
.sample-item:hover img { border-color: #28a745; }
.sample-item span { font-size: 0.8rem; color: #555; word-break: break-word; text-align: center; }

/* --- AI Modal --- */
.ai-modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); }
.ai-modal-content { background-color: #fefefe; margin: 15% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 600px; border-radius: 10px; position: relative; }
.close-modal { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }

/* --- Responsive --- */
@media (max-width: 850px) {
    .summary-row { flex-direction: column; gap: 5px; }
    .right-column { display: contents; }
    .galaxy-wrapper { order: 1; margin-right: 0; margin-top: -10px; }
    .solar-system { transform: scale(0.85); transform-origin: center center; margin-bottom: -30px; }
    .kakis-box { order: 2; margin-top: 10px; max-width: 350px; width: 100%; white-space: normal; }
    .score-panel { order: 3; width: 100%; max-width: 340px; flex-direction: row; justify-content: center; align-items: center; padding: 12px 8px; gap: 10px; min-height: auto; margin-top: -15px; }
    .score-panel .divider { width: 1px; height: 50px; background: #e0e0e0; margin: 0 5px; }
    .score-value-big { width: 70px; height: 70px; font-size: 1.6rem; border-width: 3px; }
    .score-value-small { font-size: 1.1rem; min-width: 35px; min-height: 35px; }
    .score-label { font-size: 0.75rem; white-space: nowrap; margin-bottom: 2px; }
    .score-item { justify-content: center; }
    .action-frame { order: 4; width: 100%; max-width: 350px; flex-direction: row; flex-wrap: wrap; justify-content: center; padding: 15px; gap: 10px; }
    .action-title { display: none; }
    .btn-action { flex: 1; min-width: 120px; font-size: 0.9rem; padding: 8px 5px; }
    .action-desc { width: 100%; margin-top: 5px; }
    .sample-grid { gap: 5px; }
    .sample-item span { font-size: 0.7rem; }
}
@media (max-width: 380px) {
    .solar-system { transform: scale(0.75); margin-bottom: -50px; }
    .score-value-big { width: 60px; height: 60px; font-size: 1.4rem; }
}

/* --- Table Styles --- */
.table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}
.table th, .table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #eee;
}
.table th {
    background-color: #f8f9fa;
}
.table-hover tbody tr:hover {
    background-color: #f5f5f5;
    cursor: pointer;
}
.table-striped tbody tr:nth-of-type(odd) {
    background-color: #f9f9f9;
}
.table-light thead th {
    background-color: #f8f9fa;
    color: #495057;
    font-weight: 600;
}
.align-middle {
    vertical-align: middle;
}
.text-center {
    text-align: center;
}
.mini-star-table {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    font-size: 0.8rem;
    font-weight: bold;
    color: white;
}
.btn-save-solar {
    position: absolute;
    top: 15px;
    left: 15px; /* Changed from right to left */
    background: #e0e0e0; /* Muted gray */
    color: #333;
    border: 1px solid #ccc;
    padding: 8px 15px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: bold;
    transition: background-color 0.2s;
}
.btn-save-solar:hover {
    background-color: #d5d5d5;
}
#btnCloseDetails {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 2rem;
    color: #aaa;
    cursor: pointer;
}
.bad-char {
    color: #d32f2f;
    font-weight: bold;
}
